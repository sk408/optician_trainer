import{q as ae,p as le,r as c,t as ce,j as e,v as de,w as xe,y as ue,T as i,an as he,ae as me,n as pe,C as I,B as a,a as h,P as fe,D as je,b as ge,c as ye,d as Ce,e as we,F as ve}from"./index-CKEeW60j.js";import{b as Ie}from"./index-Degjli-D.js";import{L as W}from"./LinearProgress-CxR3hh6q.js";import{A as $}from"./Alert-B3gSTUv0.js";import{A as O,H as G}from"./Help-_Ylr2_9Z.js";import{A as T}from"./ArrowBack-Bmj9z6zc.js";import{G as b}from"./Grid-BVtRtNE3.js";import{C as E}from"./Chip-DJDFe_v0.js";import{C as J}from"./CheckCircle-DIC9ZwHM.js";import{C as Y}from"./Cancel-Bnww9MG9.js";import{T as be}from"./Timer-U2oMiW7M.js";import{F as Se,D as Qe,a as Ae,b as ze,c as De}from"./Flag-BONdIxMk.js";import{C as Te,a as Ee}from"./CardContent-D-0qgwkH.js";import{R as Re,a as ke}from"./RadioGroup-CIE8abmM.js";import"./optical-theory-quiz-questions-CUWQtQn5.js";function Pe(x){return ae("MuiDialogContentText",x)}le("MuiDialogContentText",["root"]);const Be=x=>{const{classes:u}=x,o=ue({root:["root"]},Pe,u);return{...u,...o}},Le=de(i,{shouldForwardProp:x=>he(x)||x==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(x,u)=>u.root})({}),Ue=c.forwardRef(function(u,p){const o=ce({props:u,name:"MuiDialogContentText"}),{children:R,className:r,...f}=o,d=Be(f);return e.jsx(Le,{component:"p",variant:"body1",color:"textSecondary",ref:p,ownerState:f,className:xe(d.root,r),...o,classes:d})}),_e=()=>{const x=me(),{examType:u,section:p}=pe(),[o,R]=c.useState([]),[r,f]=c.useState(0),[d,y]=c.useState(null),[l,j]=c.useState([]),[S,C]=c.useState(!1),[Q,k]=c.useState(!1),[P,B]=c.useState([]),[L,U]=c.useState(30*60),[K,A]=c.useState(!1),[z,F]=c.useState(!0);c.useEffect(()=>{(()=>{try{const s=u.toLowerCase();let n=Ie(s,p);if(!n||n.length===0){console.error("No questions found for this category");return}n=re(n);const m=new Array(n.length).fill(null);R(n),j(m),F(!1)}catch(s){console.error("Error loading quiz questions:",s),F(!1)}})()},[u,p]),c.useEffect(()=>{if(z||Q)return;const t=setInterval(()=>{U(s=>s<=1?(clearInterval(t),q(),0):s-1)},1e3);return()=>clearInterval(t)},[z,Q]);const V=t=>{const s=Math.floor(t/60),n=t%60;return`${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},X=t=>{const s=g.options.indexOf(t);y(s.toString())},Z=()=>{const t=[...l];t[r]=d,j(t),y(null),C(!1),r<o.length-1?f(r+1):q()},_=()=>{const t=[...l];t[r]=d,j(t),C(!1),r>0&&(f(r-1),y(t[r-1]))},ee=()=>{C(!S)},te=()=>{B(t=>t.includes(r)?t.filter(s=>s!==r):[...t,r])},q=()=>{if(d!==l[r]){const t=[...l];t[r]=d,j(t)}k(!0)},se=()=>{f(0),y(null),j(new Array(o.length).fill(null)),C(!1),k(!1),B([]),U(30*60)},D=()=>{x("/exam-prep")},ne=()=>{let t=0,s=0,n=0;l.forEach((v,ie)=>{v===null?n++:parseInt(v)===o[ie].correctAnswer?t++:s++});const m=Math.round(t/o.length*100),N=`${u.toLowerCase()}-${p}`,w=JSON.parse(localStorage.getItem("completedQuizzes")||"[]"),M={id:N,score:m,date:new Date().toISOString(),correct:t,incorrect:s,unanswered:n},H=w.findIndex(v=>v.id===N);return H>=0?w[H]=M:w.push(M),localStorage.setItem("completedQuizzes",JSON.stringify(w)),{score:m,correct:t,incorrect:s,unanswered:n}};function re(t){const s=[...t];for(let n=s.length-1;n>0;n--){const m=Math.floor(Math.random()*(n+1));[s[n],s[m]]=[s[m],s[n]]}return s}if(z)return e.jsx(I,{maxWidth:"md",sx:{py:4},children:e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",children:[e.jsx(i,{variant:"h5",gutterBottom:!0,children:"Loading quiz questions..."}),e.jsx(W,{sx:{width:"50%",mt:2}})]})});if(o.length===0)return e.jsx(I,{maxWidth:"md",sx:{py:4},children:e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",children:[e.jsxs($,{severity:"error",sx:{width:"100%",mb:2},children:[e.jsx(O,{children:"Error"}),"No questions found for this quiz. Please try another section."]}),e.jsx(h,{variant:"contained",startIcon:e.jsx(T,{}),onClick:D,children:"Back to Exam Prep"})]})});if(Q){const t=ne();return e.jsx(I,{maxWidth:"md",sx:{py:4},children:e.jsxs(fe,{sx:{p:3},children:[e.jsx(i,{variant:"h4",align:"center",gutterBottom:!0,children:"Quiz Results"}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:3},children:[e.jsxs(i,{variant:"h2",color:t.score>=70?"success.main":"error.main",children:[t.score,"%"]}),e.jsx(i,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:t.score>=70?"Congratulations!":"Keep practicing!"}),e.jsxs(b,{container:!0,spacing:2,sx:{mt:2,maxWidth:500},children:[e.jsx(b,{item:!0,xs:4,children:e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(E,{icon:e.jsx(J,{}),label:t.correct,color:"success",sx:{width:"100%"}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Correct"})]})}),e.jsx(b,{item:!0,xs:4,children:e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(E,{icon:e.jsx(Y,{}),label:t.incorrect,color:"error",sx:{width:"100%"}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Incorrect"})]})}),e.jsx(b,{item:!0,xs:4,children:e.jsxs(a,{sx:{textAlign:"center"},children:[e.jsx(E,{icon:e.jsx(G,{}),label:t.unanswered,color:"default",sx:{width:"100%"}}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Unanswered"})]})})]})]}),e.jsx(je,{sx:{my:3}}),e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Question Review"}),e.jsx(ge,{children:o.map((s,n)=>e.jsxs(ye,{sx:{borderLeft:"4px solid",borderColor:l[n]===null?"grey.400":parseInt(l[n])===s.correctAnswer?"success.main":"error.main",mb:2,bgcolor:"background.paper",borderRadius:1,boxShadow:1},children:[e.jsx(Ce,{children:l[n]===null?e.jsx(G,{color:"action"}):parseInt(l[n])===s.correctAnswer?e.jsx(J,{color:"success"}):e.jsx(Y,{color:"error"})}),e.jsx(we,{primary:s.question,secondary:e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"body2",component:"span",color:"text.primary",children:l[n]===null?"Unanswered":`Your answer: ${s.options[parseInt(l[n])]}`}),l[n]!==null&&parseInt(l[n])!==s.correctAnswer&&e.jsxs(i,{variant:"body2",component:"span",color:"success.main",sx:{display:"block"},children:["Correct answer: ",s.options[s.correctAnswer]]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1,fontStyle:"italic"},children:s.explanation})]})})]},n))}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(h,{variant:"outlined",startIcon:e.jsx(T,{}),onClick:D,children:"Back to Exam Prep"}),e.jsx(h,{variant:"contained",onClick:se,children:"Retry Quiz"})]})]})})}const g=o[r],oe=(r+1)/o.length*100;return e.jsxs(I,{maxWidth:"md",sx:{py:4},children:[e.jsxs(a,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(h,{variant:"outlined",startIcon:e.jsx(T,{}),onClick:()=>A(!0),children:"Exit Quiz"}),e.jsxs(a,{display:"flex",alignItems:"center",children:[e.jsx(be,{color:"action",sx:{mr:1}}),e.jsx(i,{variant:"h6",color:L<300?"error.main":"text.primary",children:V(L)})]})]}),e.jsxs(a,{sx:{mb:2},children:[e.jsx(W,{variant:"determinate",value:oe,sx:{height:10,borderRadius:5}}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Question ",r+1," of ",o.length]}),e.jsx(a,{display:"flex",alignItems:"center",children:e.jsx(h,{size:"small",startIcon:e.jsx(Se,{color:P.includes(r)?"error":"action"}),onClick:te,children:P.includes(r)?"Unflag":"Flag"})})]})]}),e.jsx(Te,{children:e.jsxs(Ee,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:g.question}),e.jsx(a,{sx:{mt:3},children:e.jsx(Re,{value:d?g.options[parseInt(d)]:"",onChange:t=>X(t.target.value),children:g.options.map((t,s)=>e.jsx(ve,{value:t,control:e.jsx(ke,{}),label:t,sx:{mb:1}},s))})}),S&&e.jsxs($,{severity:"info",sx:{mt:3},children:[e.jsx(O,{children:"Explanation"}),g.explanation]})]})}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[e.jsx(h,{variant:"outlined",onClick:_,disabled:r===0,children:"Previous"}),e.jsx(h,{variant:"outlined",onClick:ee,disabled:!d,children:S?"Hide Explanation":"Show Explanation"}),e.jsx(h,{variant:"contained",onClick:Z,disabled:!d,children:r<o.length-1?"Next":"Finish Quiz"})]}),e.jsxs(Qe,{open:K,onClose:()=>A(!1),children:[e.jsx(Ae,{children:"Quit Quiz?"}),e.jsx(ze,{children:e.jsx(Ue,{children:"Are you sure you want to quit this quiz? Your progress will not be saved."})}),e.jsxs(De,{children:[e.jsx(h,{onClick:()=>A(!1),children:"Cancel"}),e.jsx(h,{onClick:D,color:"error",children:"Quit Quiz"})]})]})]})};export{_e as default};
