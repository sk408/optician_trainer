<svg xmlns="http://www.w3.org/2000/svg" width="750" height="650" viewBox="0 0 750 650">
  <title>Lens Fabrication Flowchart</title>
  <defs>
    <linearGradient id="boxGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#ffffff" />
      <stop offset="100%" stop-color="#f0f0f0" />
    </linearGradient>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
      <feOffset dx="2" dy="2" result="offsetblur" />
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.2" />
      </feComponentTransfer>
      <feMerge>
        <feMergeNode />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="750" height="650" fill="#f8f8f8" />
  
  <!-- Title -->
  <text x="375" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333333">Ophthalmic Lens Fabrication Process</text>
  
  <!-- Start -->
  <rect x="300" y="70" width="150" height="40" rx="20" ry="20" fill="#d1e7dd" stroke="#198754" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="95" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">PRESCRIPTION RECEIVED</text>
  
  <!-- Arrow -->
  <line x1="375" y1="110" x2="375" y2="130" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Selection of Lens Material -->
  <rect x="300" y="130" width="150" height="60" rx="5" ry="5" fill="url(#boxGradient)" stroke="#333333" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="155" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">SELECT LENS</text>
  <text x="375" y="175" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">MATERIAL/BLANK</text>
  
  <!-- Material Types -->
  <rect x="120" y="130" width="150" height="110" rx="5" ry="5" fill="#e0f0ff" stroke="#3399ff" stroke-width="1" />
  <text x="195" y="150" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333333">COMMON MATERIALS:</text>
  <text x="195" y="170" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• CR-39 (Plastic)</text>
  <text x="195" y="190" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Polycarbonate</text>
  <text x="195" y="210" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Hi-Index (1.60-1.74)</text>
  <text x="195" y="230" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Trivex/Glass</text>
  
  <line x1="270" y1="160" x2="300" y2="160" stroke="#3399ff" stroke-width="1" stroke-dasharray="3,2" />
  
  <!-- Arrow -->
  <line x1="375" y1="190" x2="375" y2="210" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Lens Layout and Blocking -->
  <rect x="300" y="210" width="150" height="60" rx="5" ry="5" fill="url(#boxGradient)" stroke="#333333" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="235" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">LENS LAYOUT</text>
  <text x="375" y="255" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">AND BLOCKING</text>
  
  <!-- Layout Process -->
  <rect x="480" y="210" width="150" height="90" rx="5" ry="5" fill="#e0f0ff" stroke="#3399ff" stroke-width="1" />
  <text x="555" y="230" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333333">LAYOUT INCLUDES:</text>
  <text x="555" y="250" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Marking optical center</text>
  <text x="555" y="270" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Determining blank size</text>
  <text x="555" y="290" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Aligning with PD/height</text>
  
  <line x1="450" y1="240" x2="480" y2="240" stroke="#3399ff" stroke-width="1" stroke-dasharray="3,2" />
  
  <!-- Arrow -->
  <line x1="375" y1="270" x2="375" y2="290" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Surfacing Process -->
  <rect x="300" y="290" width="150" height="60" rx="5" ry="5" fill="url(#boxGradient)" stroke="#333333" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="315" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">LENS SURFACING</text>
  <text x="375" y="335" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">(GRINDING/POLISHING)</text>
  
  <!-- Surfacing Details -->
  <rect x="120" y="290" width="150" height="110" rx="5" ry="5" fill="#e0f0ff" stroke="#3399ff" stroke-width="1" />
  <text x="195" y="310" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333333">SURFACING STEPS:</text>
  <text x="195" y="330" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Generating curve</text>
  <text x="195" y="350" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Fine grinding</text>
  <text x="195" y="370" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Polishing</text>
  <text x="195" y="390" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Power verification</text>
  
  <line x1="270" y1="320" x2="300" y2="320" stroke="#3399ff" stroke-width="1" stroke-dasharray="3,2" />
  
  <!-- Arrow -->
  <line x1="375" y1="350" x2="375" y2="370" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Edging -->
  <rect x="300" y="370" width="150" height="60" rx="5" ry="5" fill="url(#boxGradient)" stroke="#333333" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="395" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">EDGING</text>
  <text x="375" y="415" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">(SHAPING TO FRAME)</text>
  
  <!-- Edging Types -->
  <rect x="480" y="370" width="150" height="90" rx="5" ry="5" fill="#e0f0ff" stroke="#3399ff" stroke-width="1" />
  <text x="555" y="390" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333333">EDGE TYPES:</text>
  <text x="555" y="410" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Standard bevel</text>
  <text x="555" y="430" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Rimless/Groove</text>
  <text x="555" y="450" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Safety bevel</text>
  
  <line x1="450" y1="400" x2="480" y2="400" stroke="#3399ff" stroke-width="1" stroke-dasharray="3,2" />
  
  <!-- Arrow -->
  <line x1="375" y1="430" x2="375" y2="450" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Decision - Coatings? -->
  <path d="M 375,450 L 450,490 L 375,530 L 300,490 Z" fill="#fff4dd" stroke="#ffc107" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="495" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">ADD COATINGS?</text>
  
  <!-- Arrow - Yes -->
  <line x1="450" y1="490" x2="500" y2="490" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <text x="470" y="480" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">Yes</text>
  
  <!-- Coating Process -->
  <rect x="500" y="460" width="150" height="60" rx="5" ry="5" fill="url(#boxGradient)" stroke="#333333" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="575" y="485" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">COATING</text>
  <text x="575" y="505" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">APPLICATION</text>
  
  <!-- Coating Types -->
  <rect x="580" y="530" width="150" height="90" rx="5" ry="5" fill="#e0f0ff" stroke="#3399ff" stroke-width="1" />
  <text x="655" y="550" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333333">COMMON COATINGS:</text>
  <text x="655" y="570" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Anti-reflective (AR)</text>
  <text x="655" y="590" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• Scratch-resistant</text>
  <text x="655" y="610" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333333">• UV protection</text>
  
  <line x1="580" y1="550" x2="555" y2="520" stroke="#3399ff" stroke-width="1" stroke-dasharray="3,2" />
  
  <!-- Arrow from Coating back to main flow -->
  <line x1="575" y1="520" x2="575" y2="560" stroke="#333333" stroke-width="1.5" />
  <line x1="575" y1="560" x2="375" y2="560" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Arrow - No -->
  <line x1="375" y1="530" x2="375" y2="560" stroke="#333333" stroke-width="1.5" />
  <text x="355" y="545" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">No</text>
  
  <!-- Quality Control -->
  <rect x="300" y="560" width="150" height="60" rx="5" ry="5" fill="url(#boxGradient)" stroke="#333333" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="585" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">FINAL INSPECTION</text>
  <text x="375" y="605" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333333">AND QUALITY CONTROL</text>
  
  <!-- Arrow -->
  <line x1="375" y1="620" x2="375" y2="640" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- End -->
  <rect x="300" y="640" width="150" height="40" rx="20" ry="20" fill="#cfe2ff" stroke="#0d6efd" stroke-width="1.5" filter="url(#dropShadow)" />
  <text x="375" y="665" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333333">LENS READY FOR MOUNTING</text>
  
  <!-- Legend -->
  <rect x="20" y="600" width="220" height="80" rx="5" ry="5" fill="white" stroke="#333333" stroke-width="1" />
  <text x="130" y="620" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333333">LEGEND</text>
  
  <rect x="30" y="630" width="16" height="16" rx="2" ry="2" fill="url(#boxGradient)" stroke="#333333" stroke-width="1" />
  <text x="135" y="642" font-family="Arial, sans-serif" font-size="11" text-anchor="left" fill="#333333">Process Step</text>
  
  <rect x="30" y="655" width="16" height="16" rx="8" ry="8" fill="#d1e7dd" stroke="#198754" stroke-width="1" />
  <text x="135" y="667" font-family="Arial, sans-serif" font-size="11" text-anchor="left" fill="#333333">Start/End Point</text>
  
  <path d="M 105,642 L 120,642 L 112.5,651 Z" fill="#fff4dd" stroke="#ffc107" stroke-width="1" />
  <text x="180" y="667" font-family="Arial, sans-serif" font-size="11" text-anchor="left" fill="#333333">Decision Point</text>
</svg>