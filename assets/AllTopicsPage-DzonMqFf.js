import{p as se,q as ie,r as h,t as re,aa as ne,j as e,ab as ae,v as le,w as oe,T as u,x as D,y as ce,G as de,c as pe,B as f,D as R,b as me,d as K,e as ue,f as Q,a as xe,L as he,C as Z,ac as fe,P as je,m}from"./index-CsukCuIo.js";import{S as ve}from"./StudyProgressService-BSy47j64.js";import{C as ye,a as ge}from"./CardContent-tStU6YPn.js";import{C as _}from"./CheckCircle-C8bMi95r.js";import{S as be}from"./Stack-B4O10JL7.js";import{C as T}from"./Chip-Dw9q5VcE.js";import{T as Ce}from"./AccessTime-BhEVgdDe.js";import{L as Se}from"./LinearProgress-BTKG2NIa.js";import{S as Te}from"./School-ChJOtQYT.js";import{C as Ie}from"./CardActions-BzyiLoq5.js";import{T as Pe}from"./TextField-W8nk4qvG.js";import{G as c}from"./Grid-C9ZGA7eH.js";import{F as w}from"./FormControl-BDK_-sHC.js";import{I as z,S as $}from"./Select-CZPILZnP.js";import{T as Le,a as b}from"./Tabs-BhLxb0vv.js";import"./ncleTopics-DQTafvxE.js";import"./v4-C6aID195.js";function Ae(r){return ie("MuiInputAdornment",r)}const J=se("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var X;const Ee=(r,i)=>{const{ownerState:a}=r;return[i.root,i[`position${D(a.position)}`],a.disablePointerEvents===!0&&i.disablePointerEvents,i[a.variant]]},Be=r=>{const{classes:i,disablePointerEvents:a,hiddenLabel:l,position:d,size:o,variant:x}=r,j={root:["root",a&&"disablePointerEvents",d&&`position${D(d)}`,x,l&&"hiddenLabel",o&&`size${D(o)}`]};return ce(j,Ae,i)},Me=le("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Ee})(de(({theme:r})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(r.vars||r).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${J.positionStart}&:not(.${J.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),we=h.forwardRef(function(i,a){const l=re({props:i,name:"MuiInputAdornment"}),{children:d,className:o,component:x="div",disablePointerEvents:j=!1,disableTypography:v=!1,position:I,variant:y,...B}=l,p=ne()||{};let g=y;y&&p.variant,p&&!g&&(g=p.variant);const P={...l,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:j,position:I,variant:g},M=Be(P);return e.jsx(ae.Provider,{value:null,children:e.jsx(Me,{as:x,ownerState:P,className:oe(M.root,o),ref:a,...B,children:typeof d=="string"&&!v?e.jsx(u,{color:"textSecondary",children:d}):e.jsxs(h.Fragment,{children:[I==="start"?X||(X=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,d]})})})}),ze=pe(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),C=({topic:r,progress:i,onStart:a,isCurrent:l=!1})=>{const d=()=>{a&&a(r.id)},o=(i==null?void 0:i.completed)||!1,x=(i==null?void 0:i.timeSpentMinutes)&&i.timeSpentMinutes>0;return e.jsxs(ye,{variant:l?"elevation":"outlined",elevation:l?3:0,sx:{height:"100%",display:"flex",flexDirection:"column",borderLeft:l||o?"5px solid":"none",borderLeftColor:l?"primary.main":o?"success.main":"transparent",opacity:o?.85:1},children:[e.jsxs(ge,{sx:{flexGrow:1},children:[e.jsxs(f,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsx(u,{variant:"h6",component:"div",gutterBottom:!0,children:r.title}),o&&e.jsx(_,{color:"success",fontSize:"small"})]}),e.jsxs(be,{direction:"row",spacing:1,sx:{mb:2},children:[e.jsx(T,{label:r.examType,size:"small",color:r.examType==="ABO"?"primary":"secondary",variant:"outlined"}),e.jsx(T,{icon:e.jsx(Ce,{fontSize:"small"}),label:`${r.estimatedTimeMinutes} min`,size:"small"}),e.jsx(T,{label:r.difficulty,size:"small",color:"default",variant:"outlined"})]}),e.jsx(u,{variant:"body2",color:"text.secondary",paragraph:!0,children:r.description}),x&&e.jsxs(f,{sx:{mt:2,mb:2},children:[e.jsx(u,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Progress"}),e.jsx(Se,{variant:"determinate",value:o?100:Math.min(((i==null?void 0:i.timeSpentMinutes)||0)/r.estimatedTimeMinutes*100,90),color:o?"success":"primary",sx:{height:6,borderRadius:3}}),e.jsxs(u,{variant:"caption",sx:{display:"block",mt:.5},children:[(i==null?void 0:i.timeSpentMinutes)||0," min spent",(i==null?void 0:i.quizScore)!==void 0&&` • Quiz score: ${i.quizScore}%`]})]}),e.jsx(R,{sx:{my:2}}),e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Key Points:"}),e.jsxs(me,{dense:!0,disablePadding:!0,children:[r.keyPoints.slice(0,3).map((j,v)=>e.jsxs(K,{disablePadding:!0,sx:{py:.5},children:[e.jsx(ue,{sx:{minWidth:30},children:e.jsx(Te,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:j})]},v)),r.keyPoints.length>3&&e.jsx(K,{disablePadding:!0,sx:{py:.5},children:e.jsx(Q,{primary:`+${r.keyPoints.length-3} more points...`,primaryTypographyProps:{variant:"caption",color:"text.secondary"}})})]})]}),r.relatedTopics.length>0&&e.jsx(f,{sx:{px:2,pb:1},children:e.jsxs(u,{variant:"caption",color:"text.secondary",children:["Related topics: ",r.relatedTopics.join(", ")]})}),e.jsx(Ie,{children:e.jsx(xe,{fullWidth:!0,variant:"contained",component:he,to:`/study/${r.id}`,color:o?"success":"primary",onClick:d,startIcon:o?e.jsx(_,{}):void 0,children:o?"Review":x?"Continue":"Start"})})]})};function S(r){const{children:i,value:a,index:l,...d}=r;return e.jsx("div",{role:"tabpanel",hidden:a!==l,id:`filter-tabpanel-${l}`,"aria-labelledby":`filter-tab-${l}`,...d,children:a===l&&e.jsx(f,{sx:{py:3},children:i})})}const Je=()=>{const[r,i]=h.useState(!0),[a,l]=h.useState(0),[d,o]=h.useState([]),[x,j]=h.useState(""),[v,I]=h.useState("all"),[y,B]=h.useState("all"),[p,g]=h.useState("recommended");h.useEffect(()=>{(async()=>{i(!0);const s=ve.getAllTopicsWithProgress();o(s),i(!1)})()},[]);const P=(t,s)=>{l(s)},M=t=>{j(t.target.value)},Y=t=>{I(t.target.value)},ee=t=>{B(t.target.value)},te=t=>{g(t.target.value)},L=d.filter(t=>{const s=t.topic.title.toLowerCase().includes(x.toLowerCase())||t.topic.description.toLowerCase().includes(x.toLowerCase()),n=v==="all"||t.topic.difficulty===v,E=y==="all"||t.topic.examType===y;return s&&n&&E}),A=[...L].sort((t,s)=>{var n,E,F,O,W,N,U,q,G,H;if(p==="recommended")return(n=t.progress)!=null&&n.completed&&!((E=s.progress)!=null&&E.completed)?1:!((F=t.progress)!=null&&F.completed)&&((O=s.progress)!=null&&O.completed)?-1:t.topic.title.localeCompare(s.topic.title);if(p==="title")return t.topic.title.localeCompare(s.topic.title);if(p==="difficulty"){const V={beginner:1,intermediate:2,advanced:3};return V[t.topic.difficulty]-V[s.topic.difficulty]}else{if(p==="time")return t.topic.estimatedTimeMinutes-s.topic.estimatedTimeMinutes;if(p==="progress")return(W=t.progress)!=null&&W.completed&&!((N=s.progress)!=null&&N.completed)?-1:!((U=t.progress)!=null&&U.completed)&&((q=s.progress)!=null&&q.completed)?1:(((G=s.progress)==null?void 0:G.timeSpentMinutes)||0)-(((H=t.progress)==null?void 0:H.timeSpentMinutes)||0)}return 0}),k=(t,s)=>A.filter(n=>n.topic.sectionId===t&&n.topic.examType===s);return r?e.jsx(Z,{maxWidth:!1,children:e.jsx(f,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:e.jsx(fe,{})})}):e.jsxs(Z,{maxWidth:!1,sx:{py:4},children:[e.jsx(u,{variant:"h4",gutterBottom:!0,children:"ABO-NCLE Study Topics"}),e.jsx(u,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:"Browse all topics or filter to find specific content for your exam preparation."}),e.jsxs(je,{sx:{p:3,mb:4},children:[e.jsx(f,{mb:3,children:e.jsx(Pe,{fullWidth:!0,placeholder:"Search topics...",value:x,onChange:M,InputProps:{startAdornment:e.jsx(we,{position:"start",children:e.jsx(ze,{})})}})}),e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,sm:4,children:e.jsxs(w,{fullWidth:!0,children:[e.jsx(z,{id:"difficulty-label",children:"Difficulty"}),e.jsxs($,{labelId:"difficulty-label",id:"difficulty-select",value:v,label:"Difficulty",onChange:Y,children:[e.jsx(m,{value:"all",children:"All Levels"}),e.jsx(m,{value:"beginner",children:"Beginner"}),e.jsx(m,{value:"intermediate",children:"Intermediate"}),e.jsx(m,{value:"advanced",children:"Advanced"})]})]})}),e.jsx(c,{item:!0,xs:12,sm:4,children:e.jsxs(w,{fullWidth:!0,children:[e.jsx(z,{id:"exam-type-label",children:"Exam Type"}),e.jsxs($,{labelId:"exam-type-label",id:"exam-type-select",value:y,label:"Exam Type",onChange:ee,children:[e.jsx(m,{value:"all",children:"All Exams"}),e.jsx(m,{value:"ABO",children:"ABO"}),e.jsx(m,{value:"NCLE",children:"NCLE"})]})]})}),e.jsx(c,{item:!0,xs:12,sm:4,children:e.jsxs(w,{fullWidth:!0,children:[e.jsx(z,{id:"sort-label",children:"Sort By"}),e.jsxs($,{labelId:"sort-label",id:"sort-select",value:p,label:"Sort By",onChange:te,children:[e.jsx(m,{value:"recommended",children:"Recommended"}),e.jsx(m,{value:"title",children:"Title (A-Z)"}),e.jsx(m,{value:"difficulty",children:"Difficulty (Easiest First)"}),e.jsx(m,{value:"time",children:"Time (Shortest First)"}),e.jsx(m,{value:"progress",children:"Progress"})]})]})})]}),e.jsxs(f,{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(u,{variant:"subtitle1",children:[L.length," topics found"]}),e.jsxs(f,{children:[e.jsx(T,{label:`${L.filter(t=>{var s;return(s=t.progress)==null?void 0:s.completed}).length} Completed`,color:"success",variant:"outlined",sx:{mr:1}}),e.jsx(T,{label:`${L.filter(t=>{var s,n;return!((s=t.progress)!=null&&s.completed)&&((n=t.progress)==null?void 0:n.timeSpentMinutes)&&t.progress.timeSpentMinutes>0}).length} In Progress`,color:"warning",variant:"outlined"})]})]})]}),e.jsxs(Le,{value:a,onChange:P,"aria-label":"topic filter tabs",sx:{mb:2},variant:"scrollable",scrollButtons:"auto",children:[e.jsx(b,{label:"All Topics",id:"filter-tab-0","aria-controls":"filter-tabpanel-0"}),e.jsx(b,{label:"ABO Topics",id:"filter-tab-1","aria-controls":"filter-tabpanel-1"}),e.jsx(b,{label:"NCLE Topics",id:"filter-tab-2","aria-controls":"filter-tabpanel-2"}),e.jsx(b,{label:"Completed",id:"filter-tab-3","aria-controls":"filter-tabpanel-3"}),e.jsx(b,{label:"In Progress",id:"filter-tab-4","aria-controls":"filter-tabpanel-4"})]}),e.jsx(S,{value:a,index:0,children:e.jsx(c,{container:!0,spacing:3,children:A.map(t=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(C,{topic:t.topic,progress:t.progress})},t.topic.id))})}),e.jsx(S,{value:a,index:1,children:["optical-theory","dispensing","lens-applications","regulations","measurements","tools-equipment"].map(t=>{const s=k(t,"ABO");return s.length===0?null:e.jsxs(f,{mb:4,children:[e.jsx(u,{variant:"h5",gutterBottom:!0,children:t.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}),e.jsx(R,{sx:{mb:2}}),e.jsx(c,{container:!0,spacing:3,children:s.map(n=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(C,{topic:n.topic,progress:n.progress})},n.topic.id))})]},t)})}),e.jsx(S,{value:a,index:2,children:["pre-fitting","diagnostic-fitting","cl-materials","patient-education","follow-up-care","regulatory"].map(t=>{const s=k(t,"NCLE");return s.length===0?null:e.jsxs(f,{mb:4,children:[e.jsx(u,{variant:"h5",gutterBottom:!0,children:t.split("-").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}),e.jsx(R,{sx:{mb:2}}),e.jsx(c,{container:!0,spacing:3,children:s.map(n=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(C,{topic:n.topic,progress:n.progress})},n.topic.id))})]},t)})}),e.jsx(S,{value:a,index:3,children:e.jsx(c,{container:!0,spacing:3,children:A.filter(t=>{var s;return(s=t.progress)==null?void 0:s.completed}).map(t=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(C,{topic:t.topic,progress:t.progress})},t.topic.id))})}),e.jsx(S,{value:a,index:4,children:e.jsx(c,{container:!0,spacing:3,children:A.filter(t=>{var s,n;return!((s=t.progress)!=null&&s.completed)&&((n=t.progress)==null?void 0:n.timeSpentMinutes)&&t.progress.timeSpentMinutes>0}).map(t=>e.jsx(c,{item:!0,xs:12,sm:6,md:4,children:e.jsx(C,{topic:t.topic,progress:t.progress})},t.topic.id))})})]})};export{Je as default};
